(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{106:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),l=t(21),c=t.n(l),o=t(6),s=t(36),m=t(63),i=t(62);const E=Object(s.combineReducers)({productList:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{products:[]},a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"PRODUCT_LIST_REQUEST":return{loading:!0,products:[]};case"PRODUCT_LIST_SUCCESS":return{loading:!1,products:a.payload.products,pages:a.payload.pages,page:a.payload.page};case"PRODUCT_LIST_FAIL":return{loading:!1,error:a.payload};default:return e}},productDetails:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{product:{reviews:[]}},a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"PRODUCT_DETAILS_REQUEST":return{...e,loading:!0};case"PRODUCT_DETAILS_SUCCESS":return{loading:!1,product:a.payload};case"PRODUCT_DETAILS_FAIL":return{loading:!1,error:a.payload};default:return e}},productDelete:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"PRODUCT_DELETE_REQUEST":return{loading:!0};case"PRODUCT_DELETE_SUCCESS":return{loading:!1,success:!0};case"PRODUCT_DELETE_FAIL":return{loading:!1,error:a.payload};default:return e}},productCreate:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"PRODUCT_CREATE_REQUEST":return{loading:!0};case"PRODUCT_CREATE_SUCCESS":return{loading:!1,success:!0,product:a.payload};case"PRODUCT_CREATE_FAIL":return{loading:!1,error:a.payload};case"PRODUCT_CREATE_RESET":return{};default:return e}},productUpdate:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{product:{}},a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"PRODUCT_UPDATE_REQUEST":return{loading:!0};case"PRODUCT_UPDATE_SUCCESS":return{loading:!1,success:!0,product:a.payload};case"PRODUCT_UPDATE_FAIL":return{loading:!1,error:a.payload};case"PRODUCT_UPDATE_RESET":return{product:{}};default:return e}},productReviewCreate:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"PRODUCT_CREATE_REVIEW_REQUEST":return{loading:!0};case"PRODUCT_CREATE_REVIEW_SUCCESS":return{loading:!1,success:!0};case"PRODUCT_CREATE_REVIEW_FAIL":return{loading:!1,error:a.payload};case"PRODUCT_CREATE_REVIEW_RESET":return{};default:return e}},productTopRated:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{products:[]},a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"PRODUCT_TOP_REQUEST":return{loading:!0,products:[]};case"PRODUCT_TOP_SUCCESS":return{loading:!1,products:a.payload};case"PRODUCT_TOP_FAIL":return{loading:!1,error:a.payload};default:return e}},cart:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{cartItems:[],shippingAddress:{}},a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"CART_ADD_ITEM":const t=a.payload,n=e.cartItems.find(e=>e.product===t.product);return n?{...e,cartItems:e.cartItems.map(e=>e.product===n.product?t:e)}:{...e,cartItems:[...e.cartItems,t]};case"CART_REMOVE_ITEM":return{...e,cartItems:e.cartItems.filter(e=>e.product!==a.payload)};case"CART_SAVE_SHIPPING_ADDRESS":return{...e,shippingAddress:a.payload};case"CART_SAVE_PAYMENT_METHOD":return{...e,paymentMethod:a.payload};case"CART_RESET":return{...e,cartItems:[]};default:return e}},userLogin:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"USER_LOGIN_REQUEST":return{loading:!0};case"USER_LOGIN_SUCCESS":return{loading:!1,userInfo:a.payload};case"USER_LOGIN_FAIL":return{loading:!1,error:a.payload};case"USER_LOGOUT":return{};default:return e}},userRegister:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"USER_REGISTER_REQUEST":return{loading:!0};case"USER_REGISTER_SUCCESS":return{loading:!1,userInfo:a.payload};case"USER_REGISTER_FAIL":return{loading:!1,error:a.payload};case"USER_LOGOUT":return{};default:return e}},userDetails:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{user:{}},a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"USER_DETAILS_REQUEST":return{...e,loading:!0};case"USER_DETAILS_SUCCESS":return{loading:!1,user:a.payload};case"USER_DETAILS_FAIL":return{loading:!1,error:a.payload};case"USER_DETAILS_RESET":return{user:{}};default:return e}},userUpdateProfile:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"USER_UPDATE_PROFILE_REQUEST":return{loading:!0};case"USER_UPDATE_PROFILE_SUCCESS":return{loading:!1,success:!0,userInfo:a.payload};case"USER_UPDATE_PROFILE_FAIL":return{loading:!1,error:a.payload};case"USER_UPDATE_PROFILE_RESET":return{};default:return e}},userList:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{users:[]},a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"USER_LIST_REQUEST":return{loading:!0};case"USER_LIST_SUCCESS":return{loading:!1,users:a.payload};case"USER_LIST_FAIL":return{loading:!1,error:a.payload};case"USER_LIST_RESET":return{users:[]};default:return e}},userDelete:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"USER_DELETE_REQUEST":return{loading:!0};case"USER_DELETE_SUCCESS":return{loading:!1,success:!0};case"USER_DELETE_FAIL":return{loading:!1,error:a.payload};default:return e}},userUpdate:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{user:{}},a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"USER_UPDATE_REQUEST":return{loading:!0};case"USER_UPDATE_SUCCESS":return{loading:!1,success:!0};case"USER_UPDATE_FAIL":return{loading:!1,error:a.payload};case"USER_UPDATE_RESET":return{user:{}};default:return e}},orderCreate:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"ORDER_CREATE_REQUEST":return{loading:!0};case"ORDER_CREATE_SUCCESS":return{loading:!1,success:!0,order:a.payload};case"ORDER_CREATE_FAIL":return{loading:!1,error:a.payload};case"ORDER_CREATE_RESET":return{};default:return e}},orderDetails:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{loading:!0,orderItems:[],shippingAddress:{}},a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"ORDER_DETAILS_REQUEST":return{...e,loading:!0};case"ORDER_DETAILS_SUCCESS":return{loading:!1,order:a.payload};case"ORDER_DETAILS_FAIL":return{loading:!1,error:a.payload};default:return e}},orderPay:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"ORDER_PAY_REQUEST":return{loading:!0};case"ORDER_PAY_SUCCESS":return{loading:!1,success:!0};case"ORDER_PAY_FAIL":return{loading:!1,error:a.payload};case"ORDER_PAY_RESET":return{};default:return e}},orderDeliver:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"ORDER_DELIVER_REQUEST":return{loading:!0};case"ORDER_DELIVER_SUCCESS":return{loading:!1,success:!0};case"ORDER_DELIVER_FAIL":return{loading:!1,error:a.payload};case"ORDER_DELIVER_RESET":return{};default:return e}},orderListMy:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{orders:[]},a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"ORDER_LIST_MY_REQUEST":return{loading:!0};case"ORDER_LIST_MY_SUCCESS":return{loading:!1,orders:a.payload};case"ORDER_LIST_MY_FAIL":return{loading:!1,error:a.payload};case"ORDER_LIST_MY_RESET":return{orders:[]};default:return e}},orderList:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{orders:[]},a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"ORDER_LIST_REQUEST":return{loading:!0};case"ORDER_LIST_SUCCESS":return{loading:!1,orders:a.payload};case"ORDER_LIST_FAIL":return{loading:!1,error:a.payload};default:return e}}}),u=localStorage.getItem("cartItems")?JSON.parse(localStorage.getItem("cartItems")):[],d=localStorage.getItem("userInfo")?JSON.parse(localStorage.getItem("userInfo")):null,p={cart:{cartItems:u,shippingAddress:localStorage.getItem("shippingAddress")?JSON.parse(localStorage.getItem("shippingAddress")):{}},userLogin:{userInfo:d}},g=[m.a];var y=Object(s.createStore)(E,p,Object(i.composeWithDevTools)(Object(s.applyMiddleware)(...g))),h=(t(79),t(80),t(7)),S=t(13),_=t(109),R=t(10),I=t(117),C=t(119),T=t(114),v=t(115),b=t(65);var f=e=>{let{history:a}=e;const[t,l]=Object(n.useState)("");return r.a.createElement(v.a,{onSubmit:e=>{e.preventDefault(),t.trim()?a.push("/search/".concat(t)):a.push("/")},inline:!0},r.a.createElement(v.a.Control,{type:"text",name:"q",onChange:e=>l(e.target.value),placeholder:"Search Products...",className:"mr-sm-2 ml-sm-5"}),r.a.createElement(b.a,{type:"submit",variant:"outline-success",className:"p-2"},"Search"))},O=t(8),L=t.n(O);const U=()=>e=>{localStorage.removeItem("userInfo"),localStorage.removeItem("cartItems"),localStorage.removeItem("shippingAddress"),localStorage.removeItem("paymentMethod"),e({type:"USER_LOGOUT"}),e({type:"USER_DETAILS_RESET"}),e({type:"ORDER_LIST_MY_RESET"}),e({type:"USER_LIST_RESET"}),document.location.href="/login"},A=e=>async(a,t)=>{try{a({type:"USER_DETAILS_REQUEST"});const{userLogin:{userInfo:n}}=t(),r={headers:{Authorization:"Bearer ".concat(n.token)}},{data:l}=await L.a.get("/api/users/".concat(e),r);a({type:"USER_DETAILS_SUCCESS",payload:l})}catch(n){const e=n.response&&n.response.data.message?n.response.data.message:n.message;"Not authorized, token failed"===e&&a(U()),a({type:"USER_DETAILS_FAIL",payload:e})}};var D=()=>{const e=Object(o.b)(),a=Object(o.c)(e=>e.userLogin),{userInfo:t}=a;return r.a.createElement("header",null,r.a.createElement(I.a,{bg:"dark",variant:"dark",expand:"lg",collapseOnSelect:!0},r.a.createElement(_.a,null,r.a.createElement(R.LinkContainer,{to:"/"},r.a.createElement(I.a.Brand,null,"ApniKitaab")),r.a.createElement(I.a.Toggle,{"aria-controls":"basic-navbar-nav"}),r.a.createElement(I.a.Collapse,{id:"basic-navbar-nav"},r.a.createElement(S.d,{render:e=>{let{history:a}=e;return r.a.createElement(f,{history:a})}}),r.a.createElement(C.a,{className:"ml-auto"},r.a.createElement(R.LinkContainer,{to:"/cart"},r.a.createElement(C.a.Link,null,r.a.createElement("i",{className:"fas fa-shopping-cart"})," Cart")),t?r.a.createElement(T.a,{title:t.name,id:"username"},r.a.createElement(R.LinkContainer,{to:"/profile"},r.a.createElement(T.a.Item,null,"Profile")),r.a.createElement(T.a.Item,{onClick:()=>{e(U())}},"Logout")):r.a.createElement(R.LinkContainer,{to:"/login"},r.a.createElement(C.a.Link,null,r.a.createElement("i",{className:"fas fa-user"})," Sign In")),t&&t.isAdmin&&r.a.createElement(T.a,{title:"Admin",id:"adminmenu"},r.a.createElement(R.LinkContainer,{to:"/admin/userlist"},r.a.createElement(T.a.Item,null,"Users")),r.a.createElement(R.LinkContainer,{to:"/admin/productlist"},r.a.createElement(T.a.Item,null,"Products")),r.a.createElement(R.LinkContainer,{to:"/admin/orderlist"},r.a.createElement(T.a.Item,null,"Orders"))))))))},P=t(110),k=t(64);var w=()=>r.a.createElement("footer",null,r.a.createElement(_.a,null,r.a.createElement(P.a,null,r.a.createElement(k.a,{className:"text-center py-3"},"Copyright \xa9 ApniKitaab")))),N=t(120);const j=e=>{let{value:a,text:t,color:n}=e;return r.a.createElement("div",{className:"rating"},r.a.createElement("span",null,r.a.createElement("i",{style:{color:n},className:a>=1?"fas fa-star":a>=.5?"fas fa-star-half-alt":"far fa-star"})),r.a.createElement("span",null,r.a.createElement("i",{style:{color:n},className:a>=2?"fas fa-star":a>=1.5?"fas fa-star-half-alt":"far fa-star"})),r.a.createElement("span",null,r.a.createElement("i",{style:{color:n},className:a>=3?"fas fa-star":a>=2.5?"fas fa-star-half-alt":"far fa-star"})),r.a.createElement("span",null,r.a.createElement("i",{style:{color:n},className:a>=4?"fas fa-star":a>=3.5?"fas fa-star-half-alt":"far fa-star"})),r.a.createElement("span",null,r.a.createElement("i",{style:{color:n},className:a>=5?"fas fa-star":a>=4.5?"fas fa-star-half-alt":"far fa-star"})),r.a.createElement("span",null,t&&t))};j.defaultProps={color:"#f8e825"};var F=j;var G=e=>{let{product:a}=e;return r.a.createElement(N.a,{className:"my-3 p-3 rounded"},r.a.createElement(h.Link,{to:"/product/".concat(a._id)},r.a.createElement(N.a.Img,{src:a.image,variant:"top"})),r.a.createElement(N.a.Body,null,r.a.createElement(h.Link,{to:"/product/".concat(a._id)},r.a.createElement(N.a.Title,{as:"div"},r.a.createElement("strong",null,a.name))),r.a.createElement(N.a.Text,{as:"div"},r.a.createElement(F,{value:a.rating,text:"".concat(a.numReviews," reviews")})),r.a.createElement(N.a.Text,{as:"h3"},"\u20b9",a.price)))},x=t(118);const M=e=>{let{variant:a,children:t}=e;return r.a.createElement(x.a,{variant:a},t)};M.defaultProps={variant:"info"};var Q=M,z=t(111);var B=()=>r.a.createElement(z.a,{animation:"border",role:"status",style:{width:"100px",height:"100px",margin:"auto",display:"block"}},r.a.createElement("span",{className:"sr-only"},"Loading...")),V=t(121);var Y=e=>{let{pages:a,page:t,isAdmin:n=!1,keyword:l=""}=e;return a>1&&r.a.createElement(V.a,null,[...Array(a).keys()].map(e=>r.a.createElement(R.LinkContainer,{key:e+1,to:n?"/admin/productlist/".concat(e+1):l?"/search/".concat(l,"/page/").concat(e+1):"/page/".concat(e+1)},r.a.createElement(V.a.Item,{active:e+1===t},e+1))))},q=t(116),W=t(112);const J=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return async t=>{try{t({type:"PRODUCT_LIST_REQUEST"});const{data:n}=await L.a.get("/api/products?keyword=".concat(e,"&pageNumber=").concat(a));t({type:"PRODUCT_LIST_SUCCESS",payload:n})}catch(n){t({type:"PRODUCT_LIST_FAIL",payload:n.response&&n.response.data.message?n.response.data.message:n.message})}}},H=e=>async a=>{try{a({type:"PRODUCT_DETAILS_REQUEST"});const{data:t}=await L.a.get("/api/products/".concat(e));a({type:"PRODUCT_DETAILS_SUCCESS",payload:t})}catch(t){a({type:"PRODUCT_DETAILS_FAIL",payload:t.response&&t.response.data.message?t.response.data.message:t.message})}};var K=()=>{const e=Object(o.b)(),a=Object(o.c)(e=>e.productTopRated),{loading:t,error:l,products:c}=a;return Object(n.useEffect)(()=>{e(async e=>{try{e({type:"PRODUCT_TOP_REQUEST"});const{data:a}=await L.a.get("/api/products/top");e({type:"PRODUCT_TOP_SUCCESS",payload:a})}catch(l){e({type:"PRODUCT_TOP_FAIL",payload:l.response&&l.response.data.message?l.response.data.message:l.message})}})},[e]),t?r.a.createElement(B,null):l?r.a.createElement(Q,{variant:"danger"},l):r.a.createElement(q.a,{pause:"hover",className:"bg-dark"},c.map(e=>r.a.createElement(q.a.Item,{key:e._id},r.a.createElement(h.Link,{to:"/product/".concat(e._id)},r.a.createElement(W.a,{src:e.image,alt:e.name,fluid:!0}),r.a.createElement(q.a.Caption,{className:"carousel-caption"},r.a.createElement("h2",null,e.name," ( \u20b9",e.price,")"))))))},$=t(67);const X=e=>{let{title:a,description:t,keywords:n}=e;return r.a.createElement($.a,null,r.a.createElement("title",null,a),r.a.createElement("meta",{name:"description",content:t}),r.a.createElement("meta",{name:"keyword",content:n}))};X.defaultProps={title:"Welcome To ApniKitaab",description:"We sell the best products for cheap",keywords:"electronics, buy electronics, cheap electroincs"};var Z=X;var ee=e=>{let{match:a}=e;const t=a.params.keyword,l=a.params.pageNumber||1,c=Object(o.b)(),s=Object(o.c)(e=>e.productList),{loading:m,error:i,products:E,page:u,pages:d}=s;return Object(n.useEffect)(()=>{c(J(t,l))},[c,t,l]),r.a.createElement(r.a.Fragment,null,r.a.createElement(Z,null),t?r.a.createElement(h.Link,{to:"/",className:"btn btn-light"},"Go Back"):r.a.createElement(K,null),r.a.createElement("h1",null,"Latest Products"),m?r.a.createElement(B,null):i?r.a.createElement(Q,{variant:"danger"},i):r.a.createElement(r.a.Fragment,null,r.a.createElement(P.a,null,E.map(e=>r.a.createElement(k.a,{key:e._id,sm:12,md:6,lg:4,xl:3},r.a.createElement(G,{product:e})))),r.a.createElement(Y,{pages:d,page:u,keyword:t||""})))},ae=t(122);var te=e=>{let{history:a,match:t}=e;const[l,c]=Object(n.useState)(1),[s,m]=Object(n.useState)(0),[i,E]=Object(n.useState)(""),u=Object(o.b)(),d=Object(o.c)(e=>e.productDetails),{loading:p,error:g,product:y}=d,S=Object(o.c)(e=>e.userLogin),{userInfo:_}=S,R=Object(o.c)(e=>e.productReviewCreate),{success:I,loading:C,error:T}=R;Object(n.useEffect)(()=>{I&&(m(0),E("")),y._id&&y._id===t.params.id||(u(H(t.params.id)),u({type:"PRODUCT_CREATE_REVIEW_RESET"}))},[u,t,I]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(h.Link,{className:"btn btn-light my-3",to:"/"},"Go Back"),p?r.a.createElement(B,null):g?r.a.createElement(Q,{variant:"danger"},g):r.a.createElement(r.a.Fragment,null,r.a.createElement(Z,{title:y.name}),r.a.createElement(P.a,null,r.a.createElement(k.a,{md:6},r.a.createElement(W.a,{src:y.image,alt:y.name,fluid:!0})),r.a.createElement(k.a,{md:3},r.a.createElement(ae.a,{variant:"flush"},r.a.createElement(ae.a.Item,null,r.a.createElement("h3",null,y.name)),r.a.createElement(ae.a.Item,null,r.a.createElement(F,{value:y.rating,text:"".concat(y.numReviews," reviews")})),r.a.createElement(ae.a.Item,null,"Price: \u20b9",y.price),r.a.createElement(ae.a.Item,null,"Description: ",y.description))),r.a.createElement(k.a,{md:3},r.a.createElement(N.a,null,r.a.createElement(ae.a,{variant:"flush"},r.a.createElement(ae.a.Item,null,r.a.createElement(P.a,null,r.a.createElement(k.a,null,"Price:"),r.a.createElement(k.a,null,r.a.createElement("strong",null,"\u20b9",y.price)))),r.a.createElement(ae.a.Item,null,r.a.createElement(P.a,null,r.a.createElement(k.a,null,"Status:"),r.a.createElement(k.a,null,y.countInStock>0?"In Stock":"Out Of Stock"))),y.countInStock>0&&r.a.createElement(ae.a.Item,null,r.a.createElement(P.a,null,r.a.createElement(k.a,null,"Qty"),r.a.createElement(k.a,null,r.a.createElement(v.a.Control,{as:"select",value:l,onChange:e=>c(e.target.value)},[...Array(y.countInStock).keys()].map(e=>r.a.createElement("option",{key:e+1,value:e+1},e+1)))))),r.a.createElement(ae.a.Item,null,r.a.createElement(b.a,{onClick:()=>{a.push("/cart/".concat(t.params.id,"?qty=").concat(l))},className:"btn-block",type:"button",disabled:0===y.countInStock},"Add To Cart")))))),r.a.createElement(P.a,null,r.a.createElement(k.a,{md:6},r.a.createElement("h2",null,"Reviews"),0===y.reviews.length&&r.a.createElement(Q,null,"No Reviews"),r.a.createElement(ae.a,{variant:"flush"},y.reviews.map(e=>r.a.createElement(ae.a.Item,{key:e._id},r.a.createElement("strong",null,e.name),r.a.createElement(F,{value:e.rating}),r.a.createElement("p",null,e.createdAt.substring(0,10)),r.a.createElement("p",null,e.comment))),r.a.createElement(ae.a.Item,null,r.a.createElement("h2",null,"Write a Customer Review"),I&&r.a.createElement(Q,{variant:"success"},"Review submitted successfully"),C&&r.a.createElement(B,null),T&&r.a.createElement(Q,{variant:"danger"},T),_?r.a.createElement(v.a,{onSubmit:e=>{var a,n;e.preventDefault(),u((a=t.params.id,n={rating:s,comment:i},async(e,t)=>{try{e({type:"PRODUCT_CREATE_REVIEW_REQUEST"});const{userLogin:{userInfo:r}}=t(),l={headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r.token)}};await L.a.post("/api/products/".concat(a,"/reviews"),n,l),e({type:"PRODUCT_CREATE_REVIEW_SUCCESS"})}catch(g){const t=g.response&&g.response.data.message?g.response.data.message:g.message;"Not authorized, token failed"===t&&e(U()),e({type:"PRODUCT_CREATE_REVIEW_FAIL",payload:t})}}))}},r.a.createElement(v.a.Group,{controlId:"rating"},r.a.createElement(v.a.Label,null,"Rating"),r.a.createElement(v.a.Control,{as:"select",value:s,onChange:e=>m(e.target.value)},r.a.createElement("option",{value:""},"Select..."),r.a.createElement("option",{value:"1"},"1 - Poor"),r.a.createElement("option",{value:"2"},"2 - Fair"),r.a.createElement("option",{value:"3"},"3 - Good"),r.a.createElement("option",{value:"4"},"4 - Very Good"),r.a.createElement("option",{value:"5"},"5 - Excellent"))),r.a.createElement(v.a.Group,{controlId:"comment"},r.a.createElement(v.a.Label,null,"Comment"),r.a.createElement(v.a.Control,{as:"textarea",row:"3",value:i,onChange:e=>E(e.target.value)})),r.a.createElement(b.a,{disabled:C,type:"submit",variant:"primary"},"Submit")):r.a.createElement(Q,null,"Please ",r.a.createElement(h.Link,{to:"/login"},"sign in")," to write a review"," ")))))))};const ne=(e,a)=>async(t,n)=>{const{data:r}=await L.a.get("/api/products/".concat(e));t({type:"CART_ADD_ITEM",payload:{product:r._id,name:r.name,image:r.image,price:r.price,countInStock:r.countInStock,qty:a}}),localStorage.setItem("cartItems",JSON.stringify(n().cart.cartItems))};var re=e=>{let{match:a,location:t,history:l}=e;const c=a.params.id,s=t.search?Number(t.search.split("=")[1]):1,m=Object(o.b)(),i=Object(o.c)(e=>e.cart),{cartItems:E}=i;Object(n.useEffect)(()=>{c&&m(ne(c,s))},[m,c,s]);const u=e=>{m((e=>(a,t)=>{a({type:"CART_REMOVE_ITEM",payload:e}),localStorage.setItem("cartItems",JSON.stringify(t().cart.cartItems))})(e))},d=()=>{l.push("/login?redirect=shipping")};return r.a.createElement(P.a,null,r.a.createElement(k.a,{md:8},r.a.createElement("h1",null,"Shopping Cart"),0===E.length?r.a.createElement(Q,null,"Your cart is empty ",r.a.createElement(h.Link,{to:"/"},"Go Back")):r.a.createElement(ae.a,{variant:"flush"},E.map(e=>r.a.createElement(ae.a.Item,{key:e.product},r.a.createElement(P.a,null,r.a.createElement(k.a,{md:2},r.a.createElement(W.a,{src:e.image,alt:e.name,fluid:!0,rounded:!0})),r.a.createElement(k.a,{md:3},r.a.createElement(h.Link,{to:"/product/".concat(e.product)},e.name)),r.a.createElement(k.a,{md:2}," \u20b9",e.price),r.a.createElement(k.a,{md:2},r.a.createElement(v.a.Control,{as:"select",value:e.qty,onChange:a=>m(ne(e.product,Number(a.target.value)))},[...Array(e.countInStock).keys()].map(e=>r.a.createElement("option",{key:e+1,value:e+1},e+1)))),r.a.createElement(k.a,{md:2},r.a.createElement(b.a,{type:"button",variant:"light",onClick:()=>u(e.product)},r.a.createElement("i",{className:"fas fa-trash"})))))))),r.a.createElement(k.a,{md:4},r.a.createElement(N.a,null,r.a.createElement(ae.a,{variant:"flush"},r.a.createElement(ae.a.Item,null,r.a.createElement("h2",null,"Subtotal (",E.reduce((e,a)=>e+a.qty,0),") items"),"\u20b9",E.reduce((e,a)=>e+a.qty*a.price,0).toFixed(2)),r.a.createElement(ae.a.Item,null,r.a.createElement(b.a,{type:"button",className:"btn-block",disabled:0===E.length,onClick:d},"Proceed To Buy"),r.a.createElement(b.a,{type:"button",className:"btn-block",disabled:0===E.length,onClick:d},"Proceed To Rent"))))))};var le=e=>{let{children:a}=e;return r.a.createElement(_.a,null,r.a.createElement(P.a,{className:"justify-content-md-center"},r.a.createElement(k.a,{xs:12,md:6},a)))};var ce=e=>{let{location:a,history:t}=e;const[l,c]=Object(n.useState)(""),[s,m]=Object(n.useState)(""),i=Object(o.b)(),E=Object(o.c)(e=>e.userLogin),{loading:u,error:d,userInfo:p}=E,g=a.search?a.search.split("=")[1]:"/";Object(n.useEffect)(()=>{p&&t.push(g)},[t,p,g]);return r.a.createElement(le,null,r.a.createElement("h1",null,"Sign In"),d&&r.a.createElement(Q,{variant:"danger"},d),u&&r.a.createElement(B,null),r.a.createElement(v.a,{onSubmit:e=>{e.preventDefault(),i(((e,a)=>async t=>{try{t({type:"USER_LOGIN_REQUEST"});const n={headers:{"Content-Type":"application/json"}},{data:r}=await L.a.post("/api/users/login",{email:e,password:a},n);t({type:"USER_LOGIN_SUCCESS",payload:r}),localStorage.setItem("userInfo",JSON.stringify(r))}catch(d){t({type:"USER_LOGIN_FAIL",payload:d.response&&d.response.data.message?d.response.data.message:d.message})}})(l,s))}},r.a.createElement(v.a.Group,{controlId:"email"},r.a.createElement(v.a.Label,null,"Email Address"),r.a.createElement(v.a.Control,{type:"email",placeholder:"Enter email",value:l,onChange:e=>c(e.target.value)})),r.a.createElement(v.a.Group,{controlId:"password"},r.a.createElement(v.a.Label,null,"Password"),r.a.createElement(v.a.Control,{type:"password",placeholder:"Enter password",value:s,onChange:e=>m(e.target.value)})),r.a.createElement(b.a,{type:"submit",variant:"primary"},"Sign In")),r.a.createElement(P.a,{className:"py-3"},r.a.createElement(k.a,null,"New Customer?"," ",r.a.createElement(h.Link,{to:g?"/register?redirect=".concat(g):"/register"},"Register"))))};var oe=e=>{let{location:a,history:t}=e;const[l,c]=Object(n.useState)(""),[s,m]=Object(n.useState)(""),[i,E]=Object(n.useState)(""),[u,d]=Object(n.useState)(""),[p,g]=Object(n.useState)(null),y=Object(o.b)(),S=Object(o.c)(e=>e.userRegister),{loading:_,error:R,userInfo:I}=S,C=a.search?a.search.split("=")[1]:"/";Object(n.useEffect)(()=>{I&&t.push(C)},[t,I,C]);return r.a.createElement(le,null,r.a.createElement("h1",null,"Sign Up"),p&&r.a.createElement(Q,{variant:"danger"},p),R&&r.a.createElement(Q,{variant:"danger"},R),_&&r.a.createElement(B,null),r.a.createElement(v.a,{onSubmit:e=>{e.preventDefault(),i!==u?g("Passwords do not match"):y(((e,a,t)=>async n=>{try{n({type:"USER_REGISTER_REQUEST"});const r={headers:{"Content-Type":"application/json"}},{data:l}=await L.a.post("/api/users",{name:e,email:a,password:t},r);n({type:"USER_REGISTER_SUCCESS",payload:l}),n({type:"USER_LOGIN_SUCCESS",payload:l}),localStorage.setItem("userInfo",JSON.stringify(l))}catch(R){n({type:"USER_REGISTER_FAIL",payload:R.response&&R.response.data.message?R.response.data.message:R.message})}})(l,s,i))}},r.a.createElement(v.a.Group,{controlId:"name"},r.a.createElement(v.a.Label,null,"Name"),r.a.createElement(v.a.Control,{type:"name",placeholder:"Enter name",value:l,onChange:e=>c(e.target.value)})),r.a.createElement(v.a.Group,{controlId:"email"},r.a.createElement(v.a.Label,null,"Email Address"),r.a.createElement(v.a.Control,{type:"email",placeholder:"Enter email",value:s,onChange:e=>m(e.target.value)})),r.a.createElement(v.a.Group,{controlId:"password"},r.a.createElement(v.a.Label,null,"Password"),r.a.createElement(v.a.Control,{type:"password",placeholder:"Enter password",value:i,onChange:e=>E(e.target.value)})),r.a.createElement(v.a.Group,{controlId:"confirmPassword"},r.a.createElement(v.a.Label,null,"Confirm Password"),r.a.createElement(v.a.Control,{type:"password",placeholder:"Confirm password",value:u,onChange:e=>d(e.target.value)})),r.a.createElement(b.a,{type:"submit",variant:"primary"},"Register")),r.a.createElement(P.a,{className:"py-3"},r.a.createElement(k.a,null,"Have an Account?"," ",r.a.createElement(h.Link,{to:C?"/login?redirect=".concat(C):"/login"},"Login"))))},se=t(113);var me=e=>{let{location:a,history:t}=e;const[l,c]=Object(n.useState)(""),[s,m]=Object(n.useState)(""),[i,E]=Object(n.useState)(""),[u,d]=Object(n.useState)(""),[p,g]=Object(n.useState)(null),y=Object(o.b)(),h=Object(o.c)(e=>e.userDetails),{loading:S,error:_,user:I}=h,C=Object(o.c)(e=>e.userLogin),{userInfo:T}=C,f=Object(o.c)(e=>e.userUpdateProfile),{success:O}=f,D=Object(o.c)(e=>e.orderListMy),{loading:w,error:N,orders:j}=D;Object(n.useEffect)(()=>{T?I&&I.name&&!O?(c(I.name),m(I.email)):(y({type:"USER_UPDATE_PROFILE_RESET"}),y(A("profile")),y(async(e,a)=>{try{e({type:"ORDER_LIST_MY_REQUEST"});const{userLogin:{userInfo:t}}=a(),n={headers:{Authorization:"Bearer ".concat(t.token)}},{data:r}=await L.a.get("/api/orders/myorders",n);e({type:"ORDER_LIST_MY_SUCCESS",payload:r})}catch(_){const t=_.response&&_.response.data.message?_.response.data.message:_.message;"Not authorized, token failed"===t&&e(U()),e({type:"ORDER_LIST_MY_FAIL",payload:t})}})):t.push("/login")},[y,t,T,I,O]);return r.a.createElement(P.a,null,r.a.createElement(k.a,{md:3},r.a.createElement("h2",null,"User Profile"),p&&r.a.createElement(Q,{variant:"danger"},p),O&&r.a.createElement(Q,{variant:"success"},"Profile Updated"),S?r.a.createElement(B,null):_?r.a.createElement(Q,{variant:"danger"},_):r.a.createElement(v.a,{onSubmit:e=>{e.preventDefault(),i!==u?g("Passwords do not match"):y((e=>async(a,t)=>{try{a({type:"USER_UPDATE_PROFILE_REQUEST"});const{userLogin:{userInfo:n}}=t(),r={headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n.token)}},{data:l}=await L.a.put("/api/users/profile",e,r);a({type:"USER_UPDATE_PROFILE_SUCCESS",payload:l}),a({type:"USER_LOGIN_SUCCESS",payload:l}),localStorage.setItem("userInfo",JSON.stringify(l))}catch(_){const t=_.response&&_.response.data.message?_.response.data.message:_.message;"Not authorized, token failed"===t&&a(U()),a({type:"USER_UPDATE_PROFILE_FAIL",payload:t})}})({id:I._id,name:l,email:s,password:i}))}},r.a.createElement(v.a.Group,{controlId:"name"},r.a.createElement(v.a.Label,null,"Name"),r.a.createElement(v.a.Control,{type:"name",placeholder:"Enter name",value:l,onChange:e=>c(e.target.value)})),r.a.createElement(v.a.Group,{controlId:"email"},r.a.createElement(v.a.Label,null,"Email Address"),r.a.createElement(v.a.Control,{type:"email",placeholder:"Enter email",value:s,onChange:e=>m(e.target.value)})),r.a.createElement(v.a.Group,{controlId:"password"},r.a.createElement(v.a.Label,null,"Password"),r.a.createElement(v.a.Control,{type:"password",placeholder:"Enter password",value:i,onChange:e=>E(e.target.value)})),r.a.createElement(v.a.Group,{controlId:"confirmPassword"},r.a.createElement(v.a.Label,null,"Confirm Password"),r.a.createElement(v.a.Control,{type:"password",placeholder:"Confirm password",value:u,onChange:e=>d(e.target.value)})),r.a.createElement(b.a,{type:"submit",variant:"primary"},"Update"))),r.a.createElement(k.a,{md:9},r.a.createElement("h2",null,"My Orders"),w?r.a.createElement(B,null):N?r.a.createElement(Q,{variant:"danger"},N):r.a.createElement(se.a,{striped:!0,bordered:!0,hover:!0,responsive:!0,className:"table-sm"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"ID"),r.a.createElement("th",null,"DATE"),r.a.createElement("th",null,"TOTAL"),r.a.createElement("th",null,"PAID"),r.a.createElement("th",null,"DELIVERED"),r.a.createElement("th",null))),r.a.createElement("tbody",null,j.map(e=>r.a.createElement("tr",{key:e._id},r.a.createElement("td",null,e._id),r.a.createElement("td",null,e.createdAt.substring(0,10)),r.a.createElement("td",null,e.totalPrice),r.a.createElement("td",null,e.isPaid?e.paidAt.substring(0,10):r.a.createElement("i",{className:"fas fa-times",style:{color:"red"}})),r.a.createElement("td",null,e.isDelivered?e.deliveredAt.substring(0,10):r.a.createElement("i",{className:"fas fa-times",style:{color:"red"}})),r.a.createElement("td",null,r.a.createElement(R.LinkContainer,{to:"/order/".concat(e._id)},r.a.createElement(b.a,{className:"btn-sm",variant:"light"},"Details")))))))))};var ie=e=>{let{step1:a,step2:t,step3:n,step4:l}=e;return r.a.createElement(C.a,{className:"justify-content-center mb-4"},r.a.createElement(C.a.Item,null,a?r.a.createElement(R.LinkContainer,{to:"/login"},r.a.createElement(C.a.Link,null,"Sign In")):r.a.createElement(C.a.Link,{disabled:!0},"Sign In")),r.a.createElement(C.a.Item,null,t?r.a.createElement(R.LinkContainer,{to:"/shipping"},r.a.createElement(C.a.Link,null,"Shipping")):r.a.createElement(C.a.Link,{disabled:!0},"Shipping")),r.a.createElement(C.a.Item,null,n?r.a.createElement(R.LinkContainer,{to:"/payment"},r.a.createElement(C.a.Link,null,"Payment")):r.a.createElement(C.a.Link,{disabled:!0},"Payment")),r.a.createElement(C.a.Item,null,l?r.a.createElement(R.LinkContainer,{to:"/placeorder"},r.a.createElement(C.a.Link,null,"Place Order")):r.a.createElement(C.a.Link,{disabled:!0},"Place Order")))};var Ee=e=>{let{history:a}=e;const t=Object(o.c)(e=>e.cart),{shippingAddress:l}=t,[c,s]=Object(n.useState)(l.address),[m,i]=Object(n.useState)(l.city),[E,u]=Object(n.useState)(l.postalCode),[d,p]=Object(n.useState)(l.country),g=Object(o.b)();return r.a.createElement(le,null,r.a.createElement(ie,{step1:!0,step2:!0}),r.a.createElement("h1",null,"Shipping"),r.a.createElement(v.a,{onSubmit:e=>{var t;e.preventDefault(),g((t={address:c,city:m,postalCode:E,country:d},e=>{e({type:"CART_SAVE_SHIPPING_ADDRESS",payload:t}),localStorage.setItem("shippingAddress",JSON.stringify(t))})),a.push("/payment")}},r.a.createElement(v.a.Group,{controlId:"address"},r.a.createElement(v.a.Label,null,"Address"),r.a.createElement(v.a.Control,{type:"text",placeholder:"Enter address",value:c,required:!0,onChange:e=>s(e.target.value)})),r.a.createElement(v.a.Group,{controlId:"city"},r.a.createElement(v.a.Label,null,"City"),r.a.createElement(v.a.Control,{type:"text",placeholder:"Enter city",value:m,required:!0,onChange:e=>i(e.target.value)})),r.a.createElement(v.a.Group,{controlId:"postalCode"},r.a.createElement(v.a.Label,null,"Postal Code"),r.a.createElement(v.a.Control,{type:"text",placeholder:"Enter postal code",value:E,required:!0,onChange:e=>u(e.target.value)})),r.a.createElement(v.a.Group,{controlId:"country"},r.a.createElement(v.a.Label,null,"Country"),r.a.createElement(v.a.Control,{type:"text",placeholder:"Enter country",value:d,required:!0,onChange:e=>p(e.target.value)})),r.a.createElement(b.a,{type:"submit",variant:"primary"},"Continue")))};var ue=e=>{let{history:a}=e;const t=Object(o.c)(e=>e.cart),{shippingAddress:l}=t;l.address||a.push("/shipping");const[c,s]=Object(n.useState)("PayPal"),m=Object(o.b)();return r.a.createElement(le,null,r.a.createElement(ie,{step1:!0,step2:!0,step3:!0}),r.a.createElement("h1",null,"Payment Method"),r.a.createElement(v.a,{onSubmit:e=>{var t;e.preventDefault(),m((t=c,e=>{e({type:"CART_SAVE_PAYMENT_METHOD",payload:t}),localStorage.setItem("paymentMethod",JSON.stringify(t))})),a.push("/placeorder")}},r.a.createElement(v.a.Group,null,r.a.createElement(v.a.Label,{as:"legend"},"Select Method"),r.a.createElement(k.a,null,r.a.createElement(v.a.Check,{type:"radio",label:"PayPal or Credit Card",id:"PayPal",name:"paymentMethod",value:"PayPal",checked:!0,onChange:e=>s(e.target.value)}))),r.a.createElement(b.a,{type:"submit",variant:"primary"},"Continue")))};var de=e=>{let{history:a}=e;const t=Object(o.b)(),l=Object(o.c)(e=>e.cart);l.shippingAddress.address?l.paymentMethod||a.push("/payment"):a.push("/shipping");const c=e=>(Math.round(100*e)/100).toFixed(2);l.itemsPrice=c(l.cartItems.reduce((e,a)=>e+a.price*a.qty,0)),l.shippingPrice=c(l.itemsPrice>100?0:100),l.taxPrice=c(Number((.15*l.itemsPrice).toFixed(2))),l.totalPrice=(Number(l.itemsPrice)+Number(l.shippingPrice)+Number(l.taxPrice)).toFixed(2);const s=Object(o.c)(e=>e.orderCreate),{order:m,success:i,error:E}=s;Object(n.useEffect)(()=>{i&&(a.push("/order/".concat(m._id)),t({type:"USER_DETAILS_RESET"}),t({type:"ORDER_CREATE_RESET"}))},[a,i]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(ie,{step1:!0,step2:!0,step3:!0,step4:!0}),r.a.createElement(P.a,null,r.a.createElement(k.a,{md:8},r.a.createElement(ae.a,{variant:"flush"},r.a.createElement(ae.a.Item,null,r.a.createElement("h2",null,"Shipping"),r.a.createElement("p",null,r.a.createElement("strong",null,"Address:"),l.shippingAddress.address,", ",l.shippingAddress.city," ",l.shippingAddress.postalCode,","," ",l.shippingAddress.country)),r.a.createElement(ae.a.Item,null,r.a.createElement("h2",null,"Payment Method"),r.a.createElement("strong",null,"Method: "),l.paymentMethod),r.a.createElement(ae.a.Item,null,r.a.createElement("h2",null,"Order Items"),0===l.cartItems.length?r.a.createElement(Q,null,"Your cart is empty"):r.a.createElement(ae.a,{variant:"flush"},l.cartItems.map((e,a)=>r.a.createElement(ae.a.Item,{key:a},r.a.createElement(P.a,null,r.a.createElement(k.a,{md:1},r.a.createElement(W.a,{src:e.image,alt:e.name,fluid:!0,rounded:!0})),r.a.createElement(k.a,null,r.a.createElement(h.Link,{to:"/product/".concat(e.product)},e.name)),r.a.createElement(k.a,{md:4},e.qty," x \u20b9",e.price," = \u20b9",e.qty*e.price)))))))),r.a.createElement(k.a,{md:4},r.a.createElement(N.a,null,r.a.createElement(ae.a,{variant:"flush"},r.a.createElement(ae.a.Item,null,r.a.createElement("h2",null,"Order Summary")),r.a.createElement(ae.a.Item,null,r.a.createElement(P.a,null,r.a.createElement(k.a,null,"Items"),r.a.createElement(k.a,null,"\u20b9",l.itemsPrice))),r.a.createElement(ae.a.Item,null,r.a.createElement(P.a,null,r.a.createElement(k.a,null,"Shipping"),r.a.createElement(k.a,null,"\u20b9",l.shippingPrice))),r.a.createElement(ae.a.Item,null,r.a.createElement(P.a,null,r.a.createElement(k.a,null,"Tax"),r.a.createElement(k.a,null,"\u20b9",l.taxPrice))),r.a.createElement(ae.a.Item,null,r.a.createElement(P.a,null,r.a.createElement(k.a,null,"Total"),r.a.createElement(k.a,null,"\u20b9",l.totalPrice))),r.a.createElement(ae.a.Item,null,E&&r.a.createElement(Q,{variant:"danger"},E)),r.a.createElement(ae.a.Item,null,r.a.createElement(b.a,{type:"button",className:"btn-block",disabled:0===l.cartItems,onClick:()=>{t((e=>async(a,t)=>{try{a({type:"ORDER_CREATE_REQUEST"});const{userLogin:{userInfo:n}}=t(),r={headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n.token)}},{data:l}=await L.a.post("/api/orders",e,r);a({type:"ORDER_CREATE_SUCCESS",payload:l}),a({type:"CART_RESET",payload:l}),localStorage.removeItem("cartItems")}catch(E){const t=E.response&&E.response.data.message?E.response.data.message:E.message;"Not authorized, token failed"===t&&a(U()),a({type:"ORDER_CREATE_FAIL",payload:t})}})({orderItems:l.cartItems,shippingAddress:l.shippingAddress,paymentMethod:l.paymentMethod,itemsPrice:l.itemsPrice,shippingPrice:l.shippingPrice,taxPrice:l.taxPrice,totalPrice:l.totalPrice}))}},"Place Order")))))))},pe=t(70);var ge=e=>{let{match:a,history:t}=e;const l=a.params.id,[c,s]=Object(n.useState)(!1),m=Object(o.b)(),i=Object(o.c)(e=>e.orderDetails),{order:E,loading:u,error:d}=i,p=Object(o.c)(e=>e.orderPay),{loading:g,success:y}=p,S=Object(o.c)(e=>e.orderDeliver),{loading:_,success:R}=S,I=Object(o.c)(e=>e.userLogin),{userInfo:C}=I;if(!u){const e=e=>(Math.round(100*e)/100).toFixed(2);E.itemsPrice=e(E.orderItems.reduce((e,a)=>e+a.price*a.qty,0))}Object(n.useEffect)(()=>{C||t.push("/login");var e;!E||y||R||E._id!==l?(m({type:"ORDER_PAY_RESET"}),m({type:"ORDER_DELIVER_RESET"}),m((e=l,async(a,t)=>{try{a({type:"ORDER_DETAILS_REQUEST"});const{userLogin:{userInfo:n}}=t(),r={headers:{Authorization:"Bearer ".concat(n.token)}},{data:l}=await L.a.get("/api/orders/".concat(e),r);a({type:"ORDER_DETAILS_SUCCESS",payload:l})}catch(d){const t=d.response&&d.response.data.message?d.response.data.message:d.message;"Not authorized, token failed"===t&&a(U()),a({type:"ORDER_DETAILS_FAIL",payload:t})}}))):E.isPaid||(window.paypal?s(!0):(async()=>{const{data:e}=await L.a.get("/api/config/paypal"),a=document.createElement("script");a.type="text/javascript",a.src="https://www.paypal.com/sdk/js?client-id=".concat(e),a.async=!0,a.onload=()=>{s(!0)},document.body.appendChild(a)})())},[m,l,y,R,E]);return u?r.a.createElement(B,null):d?r.a.createElement(Q,{variant:"danger"},d):r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",null,"Order ",E._id),r.a.createElement(P.a,null,r.a.createElement(k.a,{md:8},r.a.createElement(ae.a,{variant:"flush"},r.a.createElement(ae.a.Item,null,r.a.createElement("h2",null,"Shipping"),r.a.createElement("p",null,r.a.createElement("strong",null,"Name: ")," ",E.user.name),r.a.createElement("p",null,r.a.createElement("strong",null,"Email: ")," ",r.a.createElement("a",{href:"mailto:".concat(E.user.email)},E.user.email)),r.a.createElement("p",null,r.a.createElement("strong",null,"Address:"),E.shippingAddress.address,", ",E.shippingAddress.city," ",E.shippingAddress.postalCode,","," ",E.shippingAddress.country),E.isDelivered?r.a.createElement(Q,{variant:"success"},"Delivered on ",E.deliveredAt):r.a.createElement(Q,{variant:"danger"},"Not Delivered")),r.a.createElement(ae.a.Item,null,r.a.createElement("h2",null,"Payment Method"),r.a.createElement("p",null,r.a.createElement("strong",null,"Method: "),E.paymentMethod),E.isPaid?r.a.createElement(Q,{variant:"success"},"Paid on ",E.paidAt):r.a.createElement(Q,{variant:"danger"},"Not Paid")),r.a.createElement(ae.a.Item,null,r.a.createElement("h2",null,"Order Items"),0===E.orderItems.length?r.a.createElement(Q,null,"Order is empty"):r.a.createElement(ae.a,{variant:"flush"},E.orderItems.map((e,a)=>r.a.createElement(ae.a.Item,{key:a},r.a.createElement(P.a,null,r.a.createElement(k.a,{md:1},r.a.createElement(W.a,{src:e.image,alt:e.name,fluid:!0,rounded:!0})),r.a.createElement(k.a,null,r.a.createElement(h.Link,{to:"/product/".concat(e.product)},e.name)),r.a.createElement(k.a,{md:4},e.qty," x \u20b9",e.price," = \u20b9",e.qty*e.price)))))))),r.a.createElement(k.a,{md:4},r.a.createElement(N.a,null,r.a.createElement(ae.a,{variant:"flush"},r.a.createElement(ae.a.Item,null,r.a.createElement("h2",null,"Order Summary")),r.a.createElement(ae.a.Item,null,r.a.createElement(P.a,null,r.a.createElement(k.a,null,"Items"),r.a.createElement(k.a,null,"\u20b9",E.itemsPrice))),r.a.createElement(ae.a.Item,null,r.a.createElement(P.a,null,r.a.createElement(k.a,null,"Shipping"),r.a.createElement(k.a,null,"\u20b9",E.shippingPrice))),r.a.createElement(ae.a.Item,null,r.a.createElement(P.a,null,r.a.createElement(k.a,null,"Tax"),r.a.createElement(k.a,null,"\u20b9",E.taxPrice))),r.a.createElement(ae.a.Item,null,r.a.createElement(P.a,null,r.a.createElement(k.a,null,"Total"),r.a.createElement(k.a,null,"\u20b9",E.totalPrice))),!E.isPaid&&r.a.createElement(ae.a.Item,null,g&&r.a.createElement(B,null),c?r.a.createElement(pe.PayPalButton,{amount:E.totalPrice,onSuccess:e=>{console.log(e),m(((e,a)=>async(t,n)=>{try{t({type:"ORDER_PAY_REQUEST"});const{userLogin:{userInfo:r}}=n(),l={headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r.token)}},{data:c}=await L.a.put("/api/orders/".concat(e,"/pay"),a,l);t({type:"ORDER_PAY_SUCCESS",payload:c})}catch(d){const a=d.response&&d.response.data.message?d.response.data.message:d.message;"Not authorized, token failed"===a&&t(U()),t({type:"ORDER_PAY_FAIL",payload:a})}})(l,e))}}):r.a.createElement(B,null)),_&&r.a.createElement(B,null),C&&C.isAdmin&&E.isPaid&&!E.isDelivered&&r.a.createElement(ae.a.Item,null,r.a.createElement(b.a,{type:"button",className:"btn btn-block",onClick:()=>{m((e=>async(a,t)=>{try{a({type:"ORDER_DELIVER_REQUEST"});const{userLogin:{userInfo:n}}=t(),r={headers:{Authorization:"Bearer ".concat(n.token)}},{data:l}=await L.a.put("/api/orders/".concat(e._id,"/deliver"),{},r);a({type:"ORDER_DELIVER_SUCCESS",payload:l})}catch(d){const t=d.response&&d.response.data.message?d.response.data.message:d.message;"Not authorized, token failed"===t&&a(U()),a({type:"ORDER_DELIVER_FAIL",payload:t})}})(E))}},"Mark As Delivered")))))))};var ye=e=>{let{history:a}=e;const t=Object(o.b)(),l=Object(o.c)(e=>e.userList),{loading:c,error:s,users:m}=l,i=Object(o.c)(e=>e.userLogin),{userInfo:E}=i,u=Object(o.c)(e=>e.userDelete),{success:d}=u;Object(n.useEffect)(()=>{E&&E.isAdmin?t(async(e,a)=>{try{e({type:"USER_LIST_REQUEST"});const{userLogin:{userInfo:t}}=a(),n={headers:{Authorization:"Bearer ".concat(t.token)}},{data:r}=await L.a.get("/api/users",n);e({type:"USER_LIST_SUCCESS",payload:r})}catch(s){const t=s.response&&s.response.data.message?s.response.data.message:s.message;"Not authorized, token failed"===t&&e(U()),e({type:"USER_LIST_FAIL",payload:t})}}):a.push("/login")},[t,a,d,E]);const p=e=>{window.confirm("Are you sure")&&t((e=>async(a,t)=>{try{a({type:"USER_DELETE_REQUEST"});const{userLogin:{userInfo:n}}=t(),r={headers:{Authorization:"Bearer ".concat(n.token)}};await L.a.delete("/api/users/".concat(e),r),a({type:"USER_DELETE_SUCCESS"})}catch(s){const t=s.response&&s.response.data.message?s.response.data.message:s.message;"Not authorized, token failed"===t&&a(U()),a({type:"USER_DELETE_FAIL",payload:t})}})(e))};return r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",null,"Users"),c?r.a.createElement(B,null):s?r.a.createElement(Q,{variant:"danger"},s):r.a.createElement(se.a,{striped:!0,bordered:!0,hover:!0,responsive:!0,className:"table-sm"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"ID"),r.a.createElement("th",null,"NAME"),r.a.createElement("th",null,"EMAIL"),r.a.createElement("th",null,"ADMIN"),r.a.createElement("th",null))),r.a.createElement("tbody",null,m.map(e=>r.a.createElement("tr",{key:e._id},r.a.createElement("td",null,e._id),r.a.createElement("td",null,e.name),r.a.createElement("td",null,r.a.createElement("a",{href:"mailto:".concat(e.email)},e.email)),r.a.createElement("td",null,e.isAdmin?r.a.createElement("i",{className:"fas fa-check",style:{color:"green"}}):r.a.createElement("i",{className:"fas fa-times",style:{color:"red"}})),r.a.createElement("td",null,r.a.createElement(R.LinkContainer,{to:"/admin/user/".concat(e._id,"/edit")},r.a.createElement(b.a,{variant:"light",className:"btn-sm"},r.a.createElement("i",{className:"fas fa-edit"}))),r.a.createElement(b.a,{variant:"danger",className:"btn-sm",onClick:()=>p(e._id)},r.a.createElement("i",{className:"fas fa-trash"}))))))))};var he=e=>{let{match:a,history:t}=e;const l=a.params.id,[c,s]=Object(n.useState)(""),[m,i]=Object(n.useState)(""),[E,u]=Object(n.useState)(!1),d=Object(o.b)(),p=Object(o.c)(e=>e.userDetails),{loading:g,error:y,user:S}=p,_=Object(o.c)(e=>e.userUpdate),{loading:R,error:I,success:C}=_;Object(n.useEffect)(()=>{C?(d({type:"USER_UPDATE_RESET"}),t.push("/admin/userlist")):S.name&&S._id===l?(s(S.name),i(S.email),u(S.isAdmin)):d(A(l))},[d,t,l,S,C]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(h.Link,{to:"/admin/userlist",className:"btn btn-light my-3"},"Go Back"),r.a.createElement(le,null,r.a.createElement("h1",null,"Edit User"),R&&r.a.createElement(B,null),I&&r.a.createElement(Q,{variant:"danger"},I),g?r.a.createElement(B,null):y?r.a.createElement(Q,{variant:"danger"},y):r.a.createElement(v.a,{onSubmit:e=>{e.preventDefault(),d((e=>async(a,t)=>{try{a({type:"USER_UPDATE_REQUEST"});const{userLogin:{userInfo:n}}=t(),r={headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n.token)}},{data:l}=await L.a.put("/api/users/".concat(e._id),e,r);a({type:"USER_UPDATE_SUCCESS"}),a({type:"USER_DETAILS_SUCCESS",payload:l}),a({type:"USER_DETAILS_RESET"})}catch(y){const t=y.response&&y.response.data.message?y.response.data.message:y.message;"Not authorized, token failed"===t&&a(U()),a({type:"USER_UPDATE_FAIL",payload:t})}})({_id:l,name:c,email:m,isAdmin:E}))}},r.a.createElement(v.a.Group,{controlId:"name"},r.a.createElement(v.a.Label,null,"Name"),r.a.createElement(v.a.Control,{type:"name",placeholder:"Enter name",value:c,onChange:e=>s(e.target.value)})),r.a.createElement(v.a.Group,{controlId:"email"},r.a.createElement(v.a.Label,null,"Email Address"),r.a.createElement(v.a.Control,{type:"email",placeholder:"Enter email",value:m,onChange:e=>i(e.target.value)})),r.a.createElement(v.a.Group,{controlId:"isadmin"},r.a.createElement(v.a.Check,{type:"checkbox",label:"Is Admin",checked:E,onChange:e=>u(e.target.checked)})),r.a.createElement(b.a,{type:"submit",variant:"primary"},"Update"))))};var Se=e=>{let{history:a,match:t}=e;const l=t.params.pageNumber||1,c=Object(o.b)(),s=Object(o.c)(e=>e.productList),{loading:m,error:i,products:E,page:u,pages:d}=s,p=Object(o.c)(e=>e.productDelete),{loading:g,error:y,success:h}=p,S=Object(o.c)(e=>e.productCreate),{loading:_,error:I,success:C,product:T}=S,v=Object(o.c)(e=>e.userLogin),{userInfo:f}=v;Object(n.useEffect)(()=>{c({type:"PRODUCT_CREATE_RESET"}),f&&f.isAdmin||a.push("/login"),C?a.push("/admin/product/".concat(T._id,"/edit")):c(J("",l))},[c,a,f,h,C,T,l]);const O=e=>{window.confirm("Are you sure")&&c((e=>async(a,t)=>{try{a({type:"PRODUCT_DELETE_REQUEST"});const{userLogin:{userInfo:n}}=t(),r={headers:{Authorization:"Bearer ".concat(n.token)}};await L.a.delete("/api/products/".concat(e),r),a({type:"PRODUCT_DELETE_SUCCESS"})}catch(i){const t=i.response&&i.response.data.message?i.response.data.message:i.message;"Not authorized, token failed"===t&&a(U()),a({type:"PRODUCT_DELETE_FAIL",payload:t})}})(e))};return r.a.createElement(r.a.Fragment,null,r.a.createElement(P.a,{className:"align-items-center"},r.a.createElement(k.a,null,r.a.createElement("h1",null,"Products")),r.a.createElement(k.a,{className:"text-right"},r.a.createElement(b.a,{className:"my-3",onClick:()=>{c(async(e,a)=>{try{e({type:"PRODUCT_CREATE_REQUEST"});const{userLogin:{userInfo:t}}=a(),n={headers:{Authorization:"Bearer ".concat(t.token)}},{data:r}=await L.a.post("/api/products",{},n);e({type:"PRODUCT_CREATE_SUCCESS",payload:r})}catch(i){const t=i.response&&i.response.data.message?i.response.data.message:i.message;"Not authorized, token failed"===t&&e(U()),e({type:"PRODUCT_CREATE_FAIL",payload:t})}})}},r.a.createElement("i",{className:"fas fa-plus"})," Create Product"))),g&&r.a.createElement(B,null),y&&r.a.createElement(Q,{variant:"danger"},y),_&&r.a.createElement(B,null),I&&r.a.createElement(Q,{variant:"danger"},I),m?r.a.createElement(B,null):i?r.a.createElement(Q,{variant:"danger"},i):r.a.createElement(r.a.Fragment,null,r.a.createElement(se.a,{striped:!0,bordered:!0,hover:!0,responsive:!0,className:"table-sm"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"ID"),r.a.createElement("th",null,"NAME"),r.a.createElement("th",null,"PRICE"),r.a.createElement("th",null,"CATEGORY"),r.a.createElement("th",null,"BRAND"),r.a.createElement("th",null))),r.a.createElement("tbody",null,E.map(e=>r.a.createElement("tr",{key:e._id},r.a.createElement("td",null,e._id),r.a.createElement("td",null,e.name),r.a.createElement("td",null,"\u20b9",e.price),r.a.createElement("td",null,e.category),r.a.createElement("td",null,e.brand),r.a.createElement("td",null,r.a.createElement(R.LinkContainer,{to:"/admin/product/".concat(e._id,"/edit")},r.a.createElement(b.a,{variant:"light",className:"btn-sm"},r.a.createElement("i",{className:"fas fa-edit"}))),r.a.createElement(b.a,{variant:"danger",className:"btn-sm",onClick:()=>O(e._id)},r.a.createElement("i",{className:"fas fa-trash"}))))))),r.a.createElement(Y,{pages:d,page:u,isAdmin:!0})))};var _e=e=>{let{match:a,history:t}=e;const l=a.params.id,[c,s]=Object(n.useState)(""),[m,i]=Object(n.useState)(0),[E,u]=Object(n.useState)(""),[d,p]=Object(n.useState)(""),[g,y]=Object(n.useState)(""),[S,_]=Object(n.useState)(0),[R,I]=Object(n.useState)(""),[C,T]=Object(n.useState)(!1),f=Object(o.b)(),O=Object(o.c)(e=>e.productDetails),{loading:A,error:D,product:P}=O,k=Object(o.c)(e=>e.productUpdate),{loading:w,error:N,success:j}=k;Object(n.useEffect)(()=>{j?(f({type:"PRODUCT_UPDATE_RESET"}),t.push("/admin/productlist")):P.name&&P._id===l?(s(P.name),i(P.price),u(P.image),p(P.brand),y(P.category),_(P.countInStock),I(P.description)):f(H(l))},[f,t,l,P,j]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(h.Link,{to:"/admin/productlist",className:"btn btn-light my-3"},"Go Back"),r.a.createElement(le,null,r.a.createElement("h1",null,"Edit Product"),w&&r.a.createElement(B,null),N&&r.a.createElement(Q,{variant:"danger"},N),A?r.a.createElement(B,null):D?r.a.createElement(Q,{variant:"danger"},D):r.a.createElement(v.a,{onSubmit:e=>{e.preventDefault(),f((e=>async(a,t)=>{try{a({type:"PRODUCT_UPDATE_REQUEST"});const{userLogin:{userInfo:n}}=t(),r={headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n.token)}},{data:l}=await L.a.put("/api/products/".concat(e._id),e,r);a({type:"PRODUCT_UPDATE_SUCCESS",payload:l}),a({type:"PRODUCT_DETAILS_SUCCESS",payload:l})}catch(D){const t=D.response&&D.response.data.message?D.response.data.message:D.message;"Not authorized, token failed"===t&&a(U()),a({type:"PRODUCT_UPDATE_FAIL",payload:t})}})({_id:l,name:c,price:m,image:E,brand:d,category:g,description:R,countInStock:S}))}},r.a.createElement(v.a.Group,{controlId:"name"},r.a.createElement(v.a.Label,null,"Name"),r.a.createElement(v.a.Control,{type:"name",placeholder:"Enter name",value:c,onChange:e=>s(e.target.value)})),r.a.createElement(v.a.Group,{controlId:"price"},r.a.createElement(v.a.Label,null,"Price"),r.a.createElement(v.a.Control,{type:"number",placeholder:"Enter price",value:m,onChange:e=>i(e.target.value)})),r.a.createElement(v.a.Group,{controlId:"image"},r.a.createElement(v.a.Label,null,"Image"),r.a.createElement(v.a.Control,{type:"text",placeholder:"Enter image url",value:E,onChange:e=>u(e.target.value)}),r.a.createElement(v.a.File,{id:"image-file",label:"Choose File",custom:!0,onChange:async e=>{const a=e.target.files[0],t=new FormData;t.append("image",a),T(!0);try{const e={headers:{"Content-Type":"multipart/form-data"}},{data:a}=await L.a.post("/api/upload",t,e);u(a),T(!1)}catch(D){console.error(D),T(!1)}}}),C&&r.a.createElement(B,null)),r.a.createElement(v.a.Group,{controlId:"brand"},r.a.createElement(v.a.Label,null,"Author"),r.a.createElement(v.a.Control,{type:"text",placeholder:"Enter brand",value:d,onChange:e=>p(e.target.value)})),r.a.createElement(v.a.Group,{controlId:"countInStock"},r.a.createElement(v.a.Label,null,"Count In Stock"),r.a.createElement(v.a.Control,{type:"number",placeholder:"Enter countInStock",value:S,onChange:e=>_(e.target.value)})),r.a.createElement(v.a.Group,{controlId:"category"},r.a.createElement(v.a.Label,null,"Category"),r.a.createElement(v.a.Control,{type:"text",placeholder:"Enter category",value:g,onChange:e=>y(e.target.value)})),r.a.createElement(v.a.Group,{controlId:"description"},r.a.createElement(v.a.Label,null,"Description"),r.a.createElement(v.a.Control,{type:"text",placeholder:"Enter description",value:R,onChange:e=>I(e.target.value)})),r.a.createElement(b.a,{type:"submit",variant:"primary"},"Update"))))};var Re=e=>{let{history:a}=e;const t=Object(o.b)(),l=Object(o.c)(e=>e.orderList),{loading:c,error:s,orders:m}=l,i=Object(o.c)(e=>e.userLogin),{userInfo:E}=i;return Object(n.useEffect)(()=>{E&&E.isAdmin?t(async(e,a)=>{try{e({type:"ORDER_LIST_REQUEST"});const{userLogin:{userInfo:t}}=a(),n={headers:{Authorization:"Bearer ".concat(t.token)}},{data:r}=await L.a.get("/api/orders",n);e({type:"ORDER_LIST_SUCCESS",payload:r})}catch(s){const t=s.response&&s.response.data.message?s.response.data.message:s.message;"Not authorized, token failed"===t&&e(U()),e({type:"ORDER_LIST_FAIL",payload:t})}}):a.push("/login")},[t,a,E]),r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",null,"Orders"),c?r.a.createElement(B,null):s?r.a.createElement(Q,{variant:"danger"},s):r.a.createElement(se.a,{striped:!0,bordered:!0,hover:!0,responsive:!0,className:"table-sm"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"ID"),r.a.createElement("th",null,"USER"),r.a.createElement("th",null,"DATE"),r.a.createElement("th",null,"TOTAL"),r.a.createElement("th",null,"PAID"),r.a.createElement("th",null,"DELIVERED"),r.a.createElement("th",null))),r.a.createElement("tbody",null,m.map(e=>r.a.createElement("tr",{key:e._id},r.a.createElement("td",null,e._id),r.a.createElement("td",null,e.user&&e.user.name),r.a.createElement("td",null,e.createdAt.substring(0,10)),r.a.createElement("td",null,"\u20b9",e.totalPrice),r.a.createElement("td",null,e.isPaid?e.paidAt.substring(0,10):r.a.createElement("i",{className:"fas fa-times",style:{color:"red"}})),r.a.createElement("td",null,e.isDelivered?e.deliveredAt.substring(0,10):r.a.createElement("i",{className:"fas fa-times",style:{color:"red"}})),r.a.createElement("td",null,r.a.createElement(R.LinkContainer,{to:"/order/".concat(e._id)},r.a.createElement(b.a,{variant:"light",className:"btn-sm"},"Details"))))))))};var Ie=()=>r.a.createElement(h.BrowserRouter,null,r.a.createElement(D,null),r.a.createElement("main",{className:"py-3"},r.a.createElement(_.a,null,r.a.createElement(S.d,{path:"/order/:id",component:ge}),r.a.createElement(S.d,{path:"/shipping",component:Ee}),r.a.createElement(S.d,{path:"/payment",component:ue}),r.a.createElement(S.d,{path:"/placeorder",component:de}),r.a.createElement(S.d,{path:"/login",component:ce}),r.a.createElement(S.d,{path:"/register",component:oe}),r.a.createElement(S.d,{path:"/profile",component:me}),r.a.createElement(S.d,{path:"/product/:id",component:te}),r.a.createElement(S.d,{path:"/cart/:id?",component:re}),r.a.createElement(S.d,{path:"/admin/userlist",component:ye}),r.a.createElement(S.d,{path:"/admin/user/:id/edit",component:he}),r.a.createElement(S.d,{path:"/admin/productlist",component:Se,exact:!0}),r.a.createElement(S.d,{path:"/admin/productlist/:pageNumber",component:Se,exact:!0}),r.a.createElement(S.d,{path:"/admin/product/:id/edit",component:_e}),r.a.createElement(S.d,{path:"/admin/orderlist",component:Re}),r.a.createElement(S.d,{path:"/search/:keyword",component:ee,exact:!0}),r.a.createElement(S.d,{path:"/page/:pageNumber",component:ee,exact:!0}),r.a.createElement(S.d,{path:"/search/:keyword/page/:pageNumber",component:ee,exact:!0}),r.a.createElement(S.d,{path:"/",component:ee,exact:!0}))),r.a.createElement(w,null));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(o.a,{store:y},r.a.createElement(Ie,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(e=>{e.unregister()}).catch(e=>{console.error(e.message)})},71:function(e,a,t){e.exports=t(106)},79:function(e,a,t){},80:function(e,a,t){}},[[71,1,2]]]);
//# sourceMappingURL=main.2dfeaed3.chunk.js.map